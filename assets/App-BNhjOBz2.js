const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeSection-D2VY_1U4.js","assets/index-D6BfmM2J.js","assets/react-vendor-TH_OxIOI.js","assets/blur-B0aSqgfj.js","assets/blur-DOfe2hmq.css","assets/ExperiencesSection-DVOjT89z.js","assets/CompactTabs-CSHKzZ0R.js","assets/PublicationsSection-BBo_nFYT.js"])))=>i.map(i=>d[i]);
import{j as e,r as t,_ as a}from"./index-D6BfmM2J.js";import"./react-vendor-TH_OxIOI.js";const n=({userName:t,currentLanguage:a,isDarkTheme:n,onLanguageSwitch:o,onThemeSwitch:i,onNavigate:s,currentSection:r,texts:c,singleLanguageMode:l=!1})=>{const g=[{id:"home",label:c.navHome},{id:"experiences",label:c.navExperiences},{id:"publications",label:c.navPublications}];return e.jsx("header",{children:e.jsxs("div",{className:"navbar",children:[e.jsxs("div",{className:"logo",children:[e.jsx("img",{src:"https://api.iconify.design/material-symbols/school.svg?color="+(n?"%23ffffff":"%23000000"),alt:"Logo",style:{height:"32px",marginRight:"10px"}}),e.jsx("span",{children:t})]}),e.jsx("nav",{className:"nav-links",children:g.map(t=>e.jsx("a",{className:r===t.id?"active":"",onClick:()=>s(t.id),children:t.label},t.id))}),e.jsxs("div",{className:"controls",children:[e.jsx("button",{className:"theme-switch",onClick:i,children:e.jsx("i",{className:"fas "+(n?"fa-sun":"fa-moon")})}),!l&&e.jsx("button",{className:"language-switch",onClick:o,children:"zh"===a?"EN":"中"})]})]})})},o=({copyrightText:t})=>e.jsx("footer",{className:"footer",children:e.jsx("div",{className:"copyright-container",children:e.jsx("p",{className:"copyright-text",dangerouslySetInnerHTML:{__html:t}})})}),i=t.lazy(()=>a(()=>import("./HomeSection-D2VY_1U4.js"),__vite__mapDeps([0,1,2,3,4]))),s=t.lazy(()=>a(()=>import("./ExperiencesSection-DVOjT89z.js"),__vite__mapDeps([5,1,2,6,3,4]))),r=t.lazy(()=>a(()=>import("./PublicationsSection-BBo_nFYT.js"),__vite__mapDeps([7,1,2,6,3,4]))),c={en:{navHome:"Home",navExperiences:"Experiences",navPublications:"Publications",aboutMe:"About Me",news:"News",latest:"Latest",googleScholar:"Google Scholar",experiences:"Experiences",education:"Education",employment:"Employment",project:"Project",honorsAndAwards:"Honors and Awards",teaching:"Teaching",reviewer:"Reviewer",major:"Major",college:"College",time:"Time",tutor:"Tutor",dissertation:"Dissertation",schoolWebsite:"School Website",publications:"Publications",academicPapers:"Academic Papers",patents:"Patents",journal:"Journal",conference:"Conference",authors:"Authors",abstract:"Abstract",doi:"DOI",patentNumber:"Patent Number",inventor:"Inventor",assignee:"Assignee",filingDate:"Filing Date",publicationDate:"Publication Date",type:"Type",paper:"Paper",code:"Code",video:"Video",site:"Site",noContentAvailable:"No content available",currentLanguage:"en"},zh:{navHome:"主页",navExperiences:"经历",navPublications:"出版物",aboutMe:"关于我",news:"新闻",latest:"最新",googleScholar:"谷歌学术",experiences:"经历",education:"教育",employment:"工作",project:"项目",honorsAndAwards:"荣誉奖项",teaching:"教学",reviewer:"审稿",major:"专业",college:"学院",time:"时间",tutor:"导师",dissertation:"学位论文",schoolWebsite:"学校网站",publications:"出版物",academicPapers:"学术论文",patents:"专利",journal:"期刊",conference:"会议",authors:"作者",abstract:"摘要",doi:"DOI",patentNumber:"专利号",inventor:"发明人",assignee:"受让人",filingDate:"申请日期",publicationDate:"公布日期",type:"类型",paper:"论文",code:"代码",video:"视频",site:"网站",noContentAvailable:"暂无内容",currentLanguage:"zh"}};function l(){const[a,l]=t.useState("en"),[g,m]=t.useState(!0),[u,h]=t.useState("home"),[d,p]=t.useState(null),[f,x]=t.useState({}),[y,b]=t.useState(!0),[S,v]=t.useState(!1);t.useEffect(()=>{(async()=>{try{const e=(new Date).getTime(),t=await fetch(`configs/config.json?t=${e}`),a=await t.json();p(a);const n=localStorage.getItem("language");n&&a.availableLanguages.includes(n)?l(n):l(a.defaultLanguage);const o=localStorage.getItem("theme");o&&m("dark"===o)}catch(e){p({availableLanguages:["en","zh"],defaultLanguage:"en",singleLanguageMode:!1})}})()},[]);const j=t.useCallback(async(e,t=!0)=>{const a={};if(a[e]={},t)try{const t=localStorage.getItem(`content_${e}`),a=localStorage.getItem(`content_${e}_time`);if(t&&a){if(Date.now()-parseInt(a)<864e5)return{[e]:JSON.parse(t)}}}catch(n){}(await Promise.all(["info","intro","news"].map(async t=>{try{if("intro"===t){const a=await fetch(`configs/${e}/intro_${e}.txt`);if(a.ok){return{type:t,data:await a.text()}}}else{const a=await fetch(`configs/${e}/${t}_${e}.json`);if(a.ok){return{type:t,data:await a.json()}}}}catch(a){return{type:t,data:null}}}))).forEach(({type:t,data:n})=>{null!==n&&(a[e][t]=n)});try{const t=JSON.stringify(a[e]).length,n=5242880;let o=0;for(let e in localStorage)localStorage.hasOwnProperty(e)&&(o+=localStorage[e].length);if(o+t>n){const e=[];for(let t in localStorage)if(t.startsWith("content_")&&!t.endsWith("_time")){const a=t+"_time",n=localStorage.getItem(a);n&&e.push({key:t,time:parseInt(n)})}e.sort((e,t)=>e.time-t.time);for(let a=0;a<e.length-1&&(localStorage.removeItem(e[a].key),localStorage.removeItem(e[a].key+"_time"),o-=localStorage.getItem(e[a].key)?.length||0,!(o+t<=n));a++);}localStorage.setItem(`content_${e}`,JSON.stringify(a[e])),localStorage.setItem(`content_${e}_time`,Date.now().toString())}catch(n){}return a},[]),w=t.useCallback(async e=>{const t=await Promise.all(["education","employment","honors","teaching","reviewer","papers","patents"].map(async t=>{try{if("intro"===t){const a=await fetch(`configs/${e}/intro_${e}.txt`);if(a.ok){return{type:t,data:await a.text()}}}else{const a=await fetch(`configs/${e}/${t}_${e}.json`);if(a.ok){return{type:t,data:await a.json()}}}}catch(a){return{type:t,data:null}}})),a={};t.forEach(({type:e,data:t})=>{null!==t&&(a[e]=t)}),x(t=>({...t,[e]:{...t[e],...a}}));try{const t=localStorage.getItem(`content_${e}`);if(t){const n={...JSON.parse(t),...a};localStorage.setItem(`content_${e}`,JSON.stringify(n)),localStorage.setItem(`content_${e}_time`,Date.now().toString())}}catch(n){}},[]);t.useEffect(()=>{(async()=>{if(!d)return;b(!0),v(!1);const e=await j(a);x(e),v(!0),b(!1),w(a)})()},[d,a,j,w]),t.useEffect(()=>{g?(document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme")):(document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"))},[g]),t.useEffect(()=>{const e=f[a]?.info;e&&e.name&&(document.title=e.name)},[f,a]);const _=f[a]||{},N=c[a];return y?e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",color:"#f0f8ff",gap:"20px",position:"fixed",top:0,left:0,width:"100%",backgroundColor:"#0a1429",zIndex:9999,margin:0,padding:0,boxSizing:"border-box"},children:[e.jsx("div",{style:{width:"60px",height:"60px",border:"4px solid rgba(52, 204, 235, 0.2)",borderTopColor:"#34cceb",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{fontSize:"1.2rem",opacity:.8,margin:0,fontFamily:"Arial, sans-serif"},children:"Loading..."}),e.jsx("p",{style:{fontSize:"0.9rem",opacity:.5,margin:0,fontFamily:"Arial, sans-serif"},children:"Loading content, please wait..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{userName:_.info?.name||"",currentLanguage:a,isDarkTheme:g,onLanguageSwitch:()=>{const e="zh"===a?"en":"zh";l(e),localStorage.setItem("language",e)},onThemeSwitch:()=>{const e=!g;m(e),localStorage.setItem("theme",e?"dark":"light")},onNavigate:e=>{h(e)},currentSection:u,texts:N,singleLanguageMode:d?.singleLanguageMode}),e.jsx("main",{className:"main-container",children:e.jsxs(t.Suspense,{fallback:e.jsx("div",{style:{width:"100%",height:"100px"}}),children:[e.jsx(i,{info:_.info,intro:_.intro,news:_.news,texts:N,isActive:"home"===u}),e.jsx(s,{education:_.education,employment:_.employment,honors:_.honors,teaching:_.teaching,reviewer:_.reviewer,texts:N,isActive:"experiences"===u}),e.jsx(r,{papers:_.papers,patents:_.patents,texts:N,isActive:"publications"===u})]})}),e.jsx(o,{copyrightText:(()=>{const e=(new Date).getFullYear();return"zh"===a?`© ${e} <a href="https://github.com/excursion-studio/personal-homepage-template-v2" target="_blank">远行工作室-个人主页 ver.2 (ESPH-V2)</a>.`:`© ${e} <a href="https://github.com/excursion-studio/personal-homepage-template-v2" target="_blank">Excursion Studio Personal Homepage ver.2 (ESPH-V2)</a>.`})()})]})}export{l as default};
